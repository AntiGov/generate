var Man_Polo_3D=function(a,c){this.container=jQuery(a);var d={fabric:{polo:0,tone:"black"},view:"front"};c=jQuery.extend(d,c);for(var b in c){this[b]=c[b]}this.initConfig();this.initLayerManager()};Man_Polo_3D.prototype.setView=function(a){if(a!="front"&&a!="back"){return false}if(this.view!=a){this.view=a;this.redraw();return true}return false};Man_Polo_3D.prototype.setFabric=function(b,a){this.fabric[b]=a;this.lmanager.setVar("fabric_"+b,a);this.lmanager.redraw();return true};Man_Polo_3D.prototype.redraw=function(b){if(typeof(b)!="undefined"){this.importConfig(b)}this.lmanager.setVar("view",this.view);for(var a in this.fabric){this.lmanager.setVar("fabric_"+a,this.fabric[a])}this.redrawPolo()};Man_Polo_3D.prototype.initConfig=function(){var a={polo_neck:"",neck_ribbon:"",polo_cuff:"",polo_num_pockets:"",polo_pocket:"",type_pocket:"","polo_style[style]":"","polo_style[style_model]":"","polo_style[model_colors][color1]":"","polo_style[model_colors][color2]":"","polo_style[model_colors][color3]":"",polo_sleeve_length:"","button_holes_threads[buttonthreads_color]":"","button_holes_threads[buttonholes_color]":"","polo_logo_ico[1]":"","polo_logo_type[1]":"","polo_logo_size[1]":"","polo_logo_position[1]":"","polo_logo_color[1]":"","polo_logo_ico[2]":"","polo_logo_type[2]":"","polo_logo_size[2]":"","polo_logo_position[2]":"","polo_logo_color[2]":"","polo_logo_ico[3]":"","polo_logo_type[3]":"","polo_logo_size[3]":"","polo_logo_position[3]":"","polo_logo_color[3]":""};this.config=a};Man_Polo_3D.prototype.importConfig=function(b){for(var a in b){if(typeof(this.config[a])!="undefined"){this.config[a]=b[a]}}};Man_Polo_3D.prototype.redrawPolo=function(){var c=(this.view=="front")?1:2;if(this.config.polo_sleeve_length=="short"){this.lmanager.layers.polo_body.setImages([["body_front.png",{zIndex:20}]]);this.lmanager.layers.polo_shadow.setImages([["shadow_front.png",{zIndex:0}]]);this.lmanager.layers.polo_cuff.setImages([[this.config.polo_cuff?this.config.polo_cuff+".png":"cuff_solid_#fabric_tone#_default.png",{zIndex:10}]])}else{if(this.config.polo_sleeve_length=="long"){this.lmanager.layers.polo_body.setImages([["body_front_long.png",{zIndex:20}]]);this.lmanager.layers.polo_shadow.setImages([["shadow_front_long.png",{zIndex:0}]]);this.lmanager.layers.polo_cuff.removeImages();if(this.config.polo_cuff){this.lmanager.layers.polo_cuff.setImages([[this.config.polo_cuff+"_long.png",{zIndex:21}]])}}}this.lmanager.layers.polo_neck.setImages([[this.config.polo_neck?this.config.polo_neck+".png":"neck_solid_#fabric_tone#_default.png",{zIndex:300}]]);this.lmanager.layers.polo_neck_ribbon.setImages([[this.config.neck_ribbon?this.config.neck_ribbon+".png":"neck_ribbon_#fabric_tone#_default.png",{zIndex:2}]]);if(this.config["polo_style[style]"]){var g=[];switch(this.config["polo_style[style]"]){case"0":break;case"a":if(parseInt(this.config["polo_style[model_colors][color1]"])){g.push([this.config["polo_style[style_model]"]+"_color1_cod"+this.config["polo_style[model_colors][color1]"]+".png",{zIndex:100}])}else{if(this.config["polo_style[style_model]"]){g.push([this.config["polo_style[style_model]"]+"_color1_coddeffault.png",{zIndex:100}])}}break;case"b":case"d":if(parseInt(this.config["polo_style[model_colors][color1]"])){g.push([this.config["polo_style[style]"]+"1_cod"+this.config["polo_style[model_colors][color1]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style]"]+"1_coddeffault.png",{zIndex:100}])}break;case"c":switch(this.config["polo_style[style_model]"]){case"c1":case"c2":if(parseInt(this.config["polo_style[model_colors][color1]"])){g.push([this.config["polo_style[style_model]"]+"_color1_cod"+this.config["polo_style[model_colors][color1]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style_model]"]+"_color1_coddeffault.png",{zIndex:100}])}break;case"c3":if(parseInt(this.config["polo_style[model_colors][color1]"])){g.push([this.config["polo_style[style_model]"]+"_color1_cod"+this.config["polo_style[model_colors][color1]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style_model]"]+"_color1_coddeffault.png",{zIndex:101}])}if(parseInt(this.config["polo_style[model_colors][color2]"])){g.push([this.config["polo_style[style_model]"]+"_color2_cod"+this.config["polo_style[model_colors][color2]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style_model]"]+"_color2_coddeffault.png",{zIndex:100}])}break;case"c4":if(parseInt(this.config["polo_style[model_colors][color1]"])){g.push([this.config["polo_style[style_model]"]+"_color1_cod"+this.config["polo_style[model_colors][color1]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style_model]"]+"_color1_coddeffault.png",{zIndex:101}])}if(parseInt(this.config["polo_style[model_colors][color2]"])){g.push([this.config["polo_style[style_model]"]+"_color2_cod"+this.config["polo_style[model_colors][color2]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style_model]"]+"_color2_coddeffault.png",{zIndex:100}])}if(parseInt(this.config["polo_style[model_colors][color3]"])){g.push([this.config["polo_style[style_model]"]+"_color3_cod"+this.config["polo_style[model_colors][color3]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style_model]"]+"_color3_coddeffault.png",{zIndex:100}])}break}break;case"e":switch(this.config["polo_style[style_model]"]){case"e1":case"e2":if(parseInt(this.config["polo_style[model_colors][color1]"])){g.push([this.config["polo_style[style_model]"]+"_color1_cod"+this.config["polo_style[model_colors][color1]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style_model]"]+"_color1_coddeffault.png",{zIndex:100}])}if(parseInt(this.config["polo_style[model_colors][color2]"])){g.push([this.config["polo_style[style_model]"]+"_color2_cod"+this.config["polo_style[model_colors][color2]"]+".png",{zIndex:200}])}else{g.push([this.config["polo_style[style_model]"]+"_color2_coddeffault.png",{zIndex:200}])}if(parseInt(this.config["polo_style[model_colors][color3]"])){g.push([this.config["polo_style[style_model]"]+"_color3_cod"+this.config["polo_style[model_colors][color3]"]+".png",{zIndex:200}])}else{g.push([this.config["polo_style[style_model]"]+"_color3_coddeffault.png",{zIndex:200}])}break;case"e3":if(parseInt(this.config["polo_style[model_colors][color1]"])){g.push([this.config["polo_style[style_model]"]+"_color1_cod"+this.config["polo_style[model_colors][color1]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style_model]"]+"_color1_coddeffault.png",{zIndex:100}])}if(parseInt(this.config["polo_style[model_colors][color2]"])){g.push([this.config["polo_style[style_model]"]+"_color2_cod"+this.config["polo_style[model_colors][color2]"]+".png",{zIndex:200}])}else{g.push([this.config["polo_style[style_model]"]+"_color2_coddeffault.png",{zIndex:200}])}break;case"e4":if(parseInt(this.config["polo_style[model_colors][color1]"])){g.push([this.config["polo_style[style_model]"]+"_color1_cod"+this.config["polo_style[model_colors][color1]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style_model]"]+"_color1_coddeffault.png",{zIndex:101}])}if(parseInt(this.config["polo_style[model_colors][color2]"])){g.push([this.config["polo_style[style_model]"]+"_color2_cod"+this.config["polo_style[model_colors][color2]"]+".png",{zIndex:100}])}else{g.push([this.config["polo_style[style_model]"]+"_color2_coddeffault.png",{zIndex:100}])}if(parseInt(this.config["polo_style[model_colors][color3]"])){g.push([this.config["polo_style[style_model]"]+"_color3_cod"+this.config["polo_style[model_colors][color3]"]+".png",{zIndex:200}])}else{g.push([this.config["polo_style[style_model]"]+"_color3_coddeffault.png",{zIndex:200}])}break}break}this.lmanager.layers.strip.setImages(g)}if(this.config["polo_logo_color[1]"]&&this.config["polo_logo_ico[1]"]&&this.config["polo_logo_position[1]"]&&this.config["polo_logo_size[1]"]&&this.config["polo_logo_type[1]"]){var b=0;var f=0;var d=this.config["polo_logo_ico[1]"]+"_"+this.config["polo_logo_position[1]"]+"_"+this.config["polo_logo_color[1]"]+"_"+this.config["polo_logo_size[1]"];if(this.config.polo_sleeve_length=="long"&&(this.config["polo_logo_position[1]"]=="cuffleft"||this.config["polo_logo_position[1]"]=="cuffright")){d=d+"_long"}this.lmanager.layers.polo_logo1.setImages([[d+".png",{zIndex:60,x:b,y:f}]])}else{this.lmanager.layers.polo_logo1.removeImages()}if(this.config["polo_logo_color[2]"]&&this.config["polo_logo_ico[2]"]&&this.config["polo_logo_position[2]"]&&this.config["polo_logo_size[2]"]&&this.config["polo_logo_type[2]"]){var b=0;var f=0;var d=this.config["polo_logo_ico[2]"]+"_"+this.config["polo_logo_position[2]"]+"_"+this.config["polo_logo_color[2]"]+"_"+this.config["polo_logo_size[2]"];if(this.config.polo_sleeve_length=="long"&&(this.config["polo_logo_position[2]"]=="cuffleft"||this.config["polo_logo_position[2]"]=="cuffright")){d=d+"_long"}this.lmanager.layers.polo_logo2.setImages([[d+".png",{zIndex:60,x:b,y:f}]])}else{this.lmanager.layers.polo_logo2.removeImages()}if(this.config["polo_logo_color[3]"]&&this.config["polo_logo_ico[3]"]&&this.config["polo_logo_position[3]"]&&this.config["polo_logo_size[3]"]&&this.config["polo_logo_type[3]"]){var b=0;var f=0;var d=this.config["polo_logo_ico[3]"]+"_"+this.config["polo_logo_position[3]"]+"_"+this.config["polo_logo_color[3]"]+"_"+this.config["polo_logo_size[3]"];if(this.config.polo_sleeve_length=="long"&&(this.config["polo_logo_position[3]"]=="cuffleft"||this.config["polo_logo_position[3]"]=="cuffright")){d=d+"_long"}this.lmanager.layers.polo_logo3.setImages([[d+".png",{zIndex:60,x:b,y:f}]])}else{this.lmanager.layers.polo_logo3.removeImages()}var e=[];if(this.config["button_holes_threads[buttonthreads_color]"]){e.push(["hilo_"+this.config["button_holes_threads[buttonthreads_color]"]+".png",{zIndex:100}])}if(this.config["button_holes_threads[buttonholes_color]"]){e.push(["ojal_"+this.config["button_holes_threads[buttonholes_color]"]+".png",{zIndex:100}])}this.lmanager.layers.hilos_ojales.setImages(e);if(parseInt(this.config.polo_num_pockets)>0){var a=[];if(this.config.polo_pocket){a.push([this.config.polo_pocket+"_left.png",{zIndex:40}]);if(this.config.polo_num_pockets==2){a.push([this.config.polo_pocket+"_right.png",{zIndex:40}])}}switch(this.config.polo_pocket){case"pocket_line_white":case"pocket_line_pink":case"pocket_line_red":case"pocket_line_green":case"pocket_line_blue":case"pocket_line_black":a.push([this.config.polo_pocket+"_ribbon_left.png",{zIndex:40}]);if(this.config.polo_num_pockets==2){a.push([this.config.polo_pocket+"_ribbon_right.png",{zIndex:40}])}break}this.lmanager.layers.polo_pocket.setImages(a)}else{this.lmanager.layers.polo_pocket.removeImages()}this.lmanager.redraw()};Man_Polo_3D.prototype.initLayerManager=function(){if(typeof(LManager)=="undefined"){alert("LManager library not loaded")}this.lmanager=new LManager(this.container);var a=this.getBaseSRC("polo");this.lmanager.addLayer("polo_shadow",{base_src:a+"#fabric_polo#/#view#/"});this.lmanager.addLayer("polo_body",{base_src:a+"#fabric_polo#/#view#/"});this.lmanager.addLayer("polo_neck",{base_src:a+"neck/front/"});this.lmanager.addLayer("polo_neck_ribbon",{base_src:a+"neck_ribbon/front/"});this.lmanager.addLayer("polo_cuff",{base_src:a+"cuff/front/"});this.lmanager.addLayer("polo_pocket",{base_src:a+"pocket/front/"});this.lmanager.addLayer("polo_logo1",{base_src:a+"logo/front/"});this.lmanager.addLayer("polo_logo2",{base_src:a+"logo/front/"});this.lmanager.addLayer("polo_logo3",{base_src:a+"logo/front/"});this.lmanager.addLayer("strip",{base_src:a+"strip/"});this.lmanager.addLayer("hilos_ojales",{base_src:a+"hilo_ojal/"})};Man_Polo_3D.prototype.getBaseSRC=function(a){return window.cdn_host+"3d/man/"+a+"/"};function inArray(d,c){var b=c.length;for(var a=0;a<b;a++){if(c[a]==d){return true}}return false};